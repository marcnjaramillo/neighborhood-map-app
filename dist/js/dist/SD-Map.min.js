function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:32.8245525,lng:-117.0951635},zoom:13,mapTypeControl:!1}),ko.applyBindings(new ViewModel)}function myFunc(){window.alert("Unable to load Google Maps. Please try again later.")}function openNav(){screen.width<=700?document.getElementById("mySidenav").style.width="250px":document.getElementById("mySidenav").style.width="362px"}function closeNav(){document.getElementById("mySidenav").style.width="0"}function ViewModel(){var e=this,o=new google.maps.LatLngBounds;e.allLocs=ko.observableArray(locations),e.allLocs().forEach(function(n){function a(e){var o=new google.maps.MarkerImage("http://chart.googleapis.com/chart?chst=d_map_spin&chld=1.15|0|"+e+"|40|_|%E2%80%A2",new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34),new google.maps.Size(21,34));return o}function t(){null!==n.marker.getAnimation()?n.marker.setAnimation(null):(n.marker.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){n.marker.setAnimation(null)},2e3),closeNav())}var i=a("0091ff"),r=a("FFFF24");marker=new google.maps.Marker({map:map,position:new google.maps.LatLng(n.lat,n.lng),icon:a("0091ff"),title:n.name,animation:google.maps.Animation.DROP}),n.marker=marker,n.marker.addListener("mouseover",function(){this.setIcon(r)}),n.marker.addListener("mouseout",function(){this.setIcon(i)}),n.marker.addListener("click",t),o.extend(n.marker.position),google.maps.event.addListener(n.marker,"click",function(){infowindow||(infowindow=new google.maps.InfoWindow);var o,a=n.name,t=n.url,i=encodeURI(n.name),r="https://en.wikipedia.org/w/api.php?action=opensearch&format=json&search="+i+"&limit=1&redirects=return&format=json";e.apiTimeout=setTimeout(function(){alert("ERROR: Failed to load data")},2e3),e.apiTimeout,$.ajax({url:r,dataType:"jsonp",success:function(i){clearTimeout(e.apiTimeout);var r=i[1];if(console.log(i),r.length>0)for(var l=0;l<r.length;l++){var s=r[l],m="http://en.wikipedia.org/wiki/"+s;o='<div class="info"><h3 class="text-center" id="infoTitle">'+a+"</h3><p>"+i[2]+' <a href="'+m+'" target="_blank">Wikipedia</a></p><a href="'+t+'" target="_blank">'+a+" Homepage</a></div>",infowindow.setContent(o)}else o='<div class="info"><h3 class="text-center" id="infoTitle">'+a+"</h3><p>Sorry, No Articles Found on Wikipedia</p></div>",infowindow.setContent(o);infowindow.open(map,n.marker)},error:function(){o='<div class="info"><h3 class="text-center" id="infoTitle">'+a+"</h3><p>Failed to reach Wikipedia Servers, please try again</p></div>",infowindow.setContent(o)}})})}),map.fitBounds(o),e.locs=function(e,o){google.maps.event.trigger(e.marker,"click")},e.request=ko.observable(""),e.filterLocs=ko.computed(function(){return ko.utils.arrayFilter(e.allLocs(),function(o){var n=o.name.toLowerCase().indexOf(e.request().toLowerCase())>=0;return n?o.marker.setVisible(!0):o.marker.setVisible(!1),n})})}var map,marker,infowindow,locations=[{name:"San Diego Zoo",url:"http://zoo.sandiegozoo.org/",lat:32.735316,lng:-117.1512347},{name:"Sea World San Diego",url:"https://seaworldparks.com/en/seaworld-sandiego/",lat:32.7639528,lng:-117.2289364},{name:"San Diego Natural History Museum",url:"http://www.sdnhm.org/",lat:32.732111,lng:-117.1473601},{name:"San Diego Zoo Safari Park",url:"http://www.sdzsafaripark.org/",lat:33.0974458,lng:-116.9957227},{name:"Birch Aquarium",url:"http://aquarium.ucsd.edu/",lat:32.8658117,lng:-117.2506888}];